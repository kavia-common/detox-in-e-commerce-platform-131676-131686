{"is_source_file": true, "format": "JavaScript", "description": "This file defines a repository object for interacting with the 'products' table in a database. It provides functions to search products with filters, retrieve a product by ID, decrement stock quantities, and list all categories.", "external_files": ["../db/database.js"], "external_methods": [], "published": ["ProductsRepo"], "classes": [], "methods": [{"name": "search({ q, category, minPrice, maxPrice, limit, offset })", "description": "Performs a filtered search on products with optional query parameters such as text search, category, price range, limit, and offset.", "scope": "ProductsRepo", "scopeKind": "class"}, {"name": "getById(id)", "description": "Retrieves a product record by its unique ID.", "scope": "ProductsRepo", "scopeKind": "class"}, {"name": "decrementStock(productId, qty)", "description": "Decreases the stock count of a product if sufficient stock exists.", "scope": "ProductsRepo", "scopeKind": "class"}, {"name": "allCategories()", "description": "Returns a list of all distinct product categories.", "scope": "ProductsRepo", "scopeKind": "class"}], "calls": ["db.prepare(...).all(...)", "db.prepare(...).get(...)", "db.prepare(...).run(...)"], "search-terms": ["ProductsRepo", "search", "decrementStock", "allCategories", "products", "database.js"], "state": 2, "file_id": 16, "knowledge_revision": 35, "git_revision": "", "ctags": [{"_type": "tag", "name": "ProductsRepo", "path": "/home/kavia/workspace/code-generation/detox-in-e-commerce-platform-131676-131686/detox_in_backend/src/repositories/products.repo.js", "pattern": "/^export const ProductsRepo = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "allCategories", "path": "/home/kavia/workspace/code-generation/detox-in-e-commerce-platform-131676-131686/detox_in_backend/src/repositories/products.repo.js", "pattern": "/^  allCategories() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "ProductsRepo", "scopeKind": "class"}, {"_type": "tag", "name": "decrementStock", "path": "/home/kavia/workspace/code-generation/detox-in-e-commerce-platform-131676-131686/detox_in_backend/src/repositories/products.repo.js", "pattern": "/^  decrementStock(productId, qty) {$/", "language": "JavaScript", "kind": "method", "signature": "(productId, qty)", "scope": "ProductsRepo", "scopeKind": "class"}, {"_type": "tag", "name": "getById", "path": "/home/kavia/workspace/code-generation/detox-in-e-commerce-platform-131676-131686/detox_in_backend/src/repositories/products.repo.js", "pattern": "/^  getById(id) {$/", "language": "JavaScript", "kind": "method", "signature": "(id)", "scope": "ProductsRepo", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/detox-in-e-commerce-platform-131676-131686/detox_in_backend/src/repositories/products.repo.js", "pattern": "/^  search({ q, category, minPrice, maxPrice, limit, offset }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ q, category, minPrice, maxPrice, limit, offset })", "scope": "ProductsRepo", "scopeKind": "class"}], "hash": "3f2de6ab87a4b1cf0973acb2e00bb2c7", "format-version": 4, "code-base-name": "detox_in_backend", "filename": "detox_in_backend/src/repositories/products.repo.js", "revision_history": [{"35": ""}]}