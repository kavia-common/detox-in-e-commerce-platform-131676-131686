{"is_source_file": true, "format": "JavaScript", "description": "This file defines service functions related to order processing in an e-commerce system, including creating an order from a user's cart and listing user orders.", "external_files": ["../db/database.js", "../repositories/orders.repo.js", "../repositories/carts.repo.js", "../repositories/products.repo.js"], "external_methods": ["db.transaction", "OrdersRepo.getById", "OrdersRepo.createOrder", "OrdersRepo.listByUser", "CartsRepo.getOrCreateCart", "CartsRepo.getCartItems", "CartsRepo.clearCart", "ProductsRepo.getById", "ProductsRepo.decrementStock"], "published": ["createOrderFromCart", "listUserOrders"], "classes": [], "methods": [{"name": "createOrderFromCart(userId, { address, paymentRef })", "description": "Creates a paid order from the user's cart, verifies stock, calculates totals, decrements stock, and clears the cart.", "scope": "", "scopeKind": ""}, {"name": "listUserOrders(userId)", "description": "Retrieves and lists all orders associated with a specific user.", "scope": "", "scopeKind": ""}], "calls": ["CartsRepo.getOrCreateCart", "CartsRepo.getCartItems", "ProductsRepo.getById", "ProductsRepo.decrementStock", "OrdersRepo.createOrder", "CartsRepo.clearCart", "db.transaction", "OrdersRepo.listByUser"], "search-terms": ["orders.service.js", "createOrderFromCart", "listUserOrders", "CartsRepo", "ProductsRepo", "OrdersRepo", "transaction"], "state": 2, "file_id": 22, "knowledge_revision": 50, "git_revision": "", "ctags": [{"_type": "tag", "name": "createOrderFromCart", "path": "/home/kavia/workspace/code-generation/detox-in-e-commerce-platform-131676-131686/detox_in_backend/src/services/orders.service.js", "pattern": "/^export function createOrderFromCart(userId, { address, paymentRef }) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, { address, paymentRef })"}, {"_type": "tag", "name": "listUserOrders", "path": "/home/kavia/workspace/code-generation/detox-in-e-commerce-platform-131676-131686/detox_in_backend/src/services/orders.service.js", "pattern": "/^export function listUserOrders(userId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId)"}], "hash": "4de8ccfb8d39aa19c3199968883b6ddc", "format-version": 4, "code-base-name": "detox_in_backend", "filename": "detox_in_backend/src/services/orders.service.js", "revision_history": [{"50": ""}]}